---
layout: single
title: "How Twitter users reacted to Brexit"
description: "My attempt to use the TwitteR and qdap packages in tweet mining and sentimental analysis"
category: R
tags: [r, brexit, twitter, sentimental analysis]
comments: true
---

"What do you think about Brexit?" asked the interviewer, in my very first job interview in Vietnam, on June 24, 2016. Being unplugged from the Internet for 18 hours on the airplane from US to Vietnam, and another 12 hours of sleep due to jetlag, I was stunned. Being so unexpected as it was, Brexit cost me a job offer. However, also being hugely popular and polarized, it gives me a great opportunity to practice text mining and sentimental analysis. In this post, I would demonstrate the process of using the `TwitteR` and `qdap` packages, along with other common packages, to analyze the reaction of Twitter users on June 24, 2016, the day Brexit happened.


## Cleaning the data

The `qdap` package can only do sentimental analysis with ASCII characters, and would not be available to run with emojis and latin characters. To eliminate that problem, I convert all characters in the form of `latin1` to `ASCII`.

```r
brexit$text = iconv(brexit$text, "latin1", "ASCII", sub="")
```

Sentimental analysis is also unable to work with URLs, so I also strip all URLs from the text:

```r
brexit$text = gsub(' http[^[:blank:]]+', '', brexit$text)
```

Finally, since I only want to do analysis with original tweets, I make a subset for original tweets:

```r
org = subset(brexit, !isRetweet)
```

## Calculating the sentimental polarity of the tweets

Calculating the sentimental polarity of texts is very simple, thanks to function `polarity` in package `qdap`. Note that `rJava` is needed in order for `qdap` to work, and `rJava` can only be installed when **Java** and **RStudio** in your computer are the same version (either both 32-bit or both 64-bit).

The `polarity` function would return a 
