---
layout: single
title: "Explore the World of Pokemons using plotly"
description: "My attempt to make interactive plots using plotly"
category: R
tags: [r, pokemon, plotly, ggplot2, interactive, dplyr, tidyr]
comments: true
---

Interactive plots made by `D3.js`, as useful and exciting as they look, are very daunting for the beginning users. However, recently, I have discovered a more light-weight alternative to `D3`, especially if you are already familiar with `ggplot2`, `plotly`. Although `plotly` can't totally replace `D3` for complicated works (thus `D3` is still a very highly sought after skill), it can do amazing jobs with simple interactive plots. In this post, I will analyze the [Pokemon dataset](https://www.kaggle.com/abcsds/pokemon) with 800 different pokemons and use `ggplot2` and `plotly` for interactive visualizations. 

To use `plotly` in R, first you need to follow [this guide](https://plot.ly/r/getting-started/) to set up (`plotly` also supports a variety of languages including Python, so feel free to choose the language of your choice).

## Preliminary steps

Using the `str` function for the dataset, we can see the very clean and straightforward structure of the dataset:

```
str(pokemons_data)

'data.frame':	800 obs. of  11 variables:
 $ X.     : int  1 2 3 3 4 5 6 6 6 7 ...
 $ Name   : Factor w/ 800 levels "Abomasnow","AbomasnowMega Abomasnow",..: 81 330 746 747 103 104 100 101 102 666 ...
 $ Type.1 : Factor w/ 18 levels "Bug","Dark","Dragon",..: 10 10 10 10 7 7 7 7 7 18 ...
 $ Type.2 : Factor w/ 19 levels "","Bug","Dark",..: 15 15 15 15 1 1 9 4 9 1 ...
 $ Total  : int  318 405 525 625 309 405 534 634 634 314 ...
 $ HP     : int  45 60 80 80 39 58 78 78 78 44 ...
 $ Attack : int  49 62 82 100 52 64 84 130 104 48 ...
 $ Defense: int  49 63 83 123 43 58 78 111 78 65 ...
 $ Sp..Atk: int  65 80 100 122 60 80 109 130 159 50 ...
 $ Sp..Def: int  65 80 100 120 50 65 85 85 115 64 ...
 $ Speed  : int  45 60 80 80 65 80 100 100 100 43 ...
 ```
 
 The dataset has 800 rows (yes, 800 different pokemons!) with 11 basic variables including their IDs, names, types, and stats. Looking at the source, each column is explained as followed:
 
 
    #: ID for each pokemon
    Name: Name of each pokemon
    Type 1: Each pokemon has a type, this determines weakness/resistance to attacks
    Type 2: Some pokemon are dual type and have 2
    Total: sum of all stats that come after this, a general guide to how strong a pokemon is
    HP: hit points, or health, defines how much damage a pokemon can withstand before fainting
    Attack: the base modifier for normal attacks (eg. Scratch, Punch)
    Defense: the base damage resistance against normal attacks
    SP Atk: special attack, the base modifier for special attacks (e.g. fire blast, bubble beam)
    SP Def: the base damage resistance against special attacks
    Speed: determines which pokemon attacks first each round

One thing we can notice from the dataset is that there two main types of pokemons, Single type and Dual type. We can sort the pokemons into these two types by using the `ifelse` function:

```
pokemons_data$Type <- ifelse(pokemons_data$Type.2 != "", "Dual Type", "Single Type")
```

At this point, there is no more cleaning needed, so we can proceed to the next step.

## The number of Pokemons in each type (pledge) and their average stats

Pikachu is an eletric pokemon. Charmander is a fire pokemon. Bulbasaur is a grass pokemon. Mewtwo is a psychic pokemon. Being a somewhat casual Pokemon player, I can only name the types (pledges) of these pokemons out of my head. However, to do a full analysis of the types and their average stats, a little help from the `dplyr` package is much needed:

```
byType1 <- group_by(pokemons, Type.1) 
averageStats <- summarise(byType1,
                   count = n(),
                   averageTotal = mean(Total, na.rm = T),
                   averageHP = mean(HP, na.rm = T),
                   averageAttack = mean(Attack, na.rm = T),
                   averageDefense = mean(Defense, na.rm = T),
                   averageSpAtk = mean(Sp..Atk, na.rm = T),
                   averageSpDef = mean(Sp..Def, na.rm = T),
                   averageSpeed = mean(Speed, na.rm = T))
```

The piece of codes above would group the pokemons by their type 1, and calculate the (average) stats of each of these type 1 groups, including the number of pokemons in this group, the total points, HP, attack, defense and so on. This would return the following dataframe:

```
     Type.1 count averageTotal averageHP averageAttack averageDefense averageSpAtk averageSpDef averageSpeed
     (fctr) (int)        (dbl)     (dbl)         (dbl)          (dbl)        (dbl)        (dbl)        (dbl)
1       Bug    69     378.9275  56.88406      70.97101       70.72464     53.86957     64.79710     61.68116
2      Dark    31     445.7419  66.80645      88.38710       70.22581     74.64516     69.51613     76.16129
3    Dragon    32     550.5312  83.31250     112.12500       86.37500     96.84375     88.84375     83.03125
4  Electric    44     443.4091  59.79545      69.09091       66.29545     90.02273     73.70455     84.50000
5     Fairy    17     413.1765  74.11765      61.52941       65.70588     78.52941     84.70588     48.58824
6  Fighting    27     416.4444  69.85185      96.77778       65.92593     53.11111     64.70370     66.07407
7      Fire    52     458.0769  69.90385      84.76923       67.76923     88.98077     72.21154     74.44231
8    Flying     4     485.0000  70.75000      78.75000       66.25000     94.25000     72.50000    102.50000
9     Ghost    32     439.5625  64.43750      73.78125       81.18750     79.34375     76.46875     64.34375
10    Grass    70     421.1429  67.27143      73.21429       70.80000     77.50000     70.42857     61.92857
11   Ground    32     437.5000  73.78125      95.75000       84.84375     56.46875     62.75000     63.90625
12      Ice    24     433.4583  72.00000      72.75000       71.41667     77.54167     76.29167     63.45833
13   Normal    98     401.6837  77.27551      73.46939       59.84694     55.81633     63.72449     71.55102
14   Poison    28     399.1429  67.25000      74.67857       68.82143     60.42857     64.39286     63.57143
15  Psychic    57     475.9474  70.63158      71.45614       67.68421     98.40351     86.28070     81.49123
16     Rock    44     453.7500  65.36364      92.86364      100.79545     63.34091     75.47727     55.90909
17    Steel    27     487.7037  65.22222      92.70370      126.37037     67.51852     80.62963     55.25926
18    Water   112     430.4554  72.06250      74.15179       72.94643     74.81250     70.51786     65.96429
```

To figure out which is the most varied type, we can run the following line of code:

```
byCount <- arrange(averageStats, desc(count))
```
which would reorder the dataframe according to the number of counts (from highest to lowest) and gives us the result:

```
     Type.1 count averageTotal averageHP averageAttack averageDefense averageSpAtk averageSp..Def averageSpeed
     (fctr) (int)        (dbl)     (dbl)         (dbl)          (dbl)        (dbl)          (dbl)        (dbl)
1     Water   112     430.4554  72.06250      74.15179       72.94643     74.81250       70.51786     65.96429
2    Normal    98     401.6837  77.27551      73.46939       59.84694     55.81633       63.72449     71.55102
3     Grass    70     421.1429  67.27143      73.21429       70.80000     77.50000       70.42857     61.92857
4       Bug    69     378.9275  56.88406      70.97101       70.72464     53.86957       64.79710     61.68116
5   Psychic    57     475.9474  70.63158      71.45614       67.68421     98.40351       86.28070     81.49123
6      Fire    52     458.0769  69.90385      84.76923       67.76923     88.98077       72.21154     74.44231
7  Electric    44     443.4091  59.79545      69.09091       66.29545     90.02273       73.70455     84.50000
8      Rock    44     453.7500  65.36364      92.86364      100.79545     63.34091       75.47727     55.90909
9    Dragon    32     550.5312  83.31250     112.12500       86.37500     96.84375       88.84375     83.03125
10    Ghost    32     439.5625  64.43750      73.78125       81.18750     79.34375       76.46875     64.34375
11   Ground    32     437.5000  73.78125      95.75000       84.84375     56.46875       62.75000     63.90625
12     Dark    31     445.7419  66.80645      88.38710       70.22581     74.64516       69.51613     76.16129
13   Poison    28     399.1429  67.25000      74.67857       68.82143     60.42857       64.39286     63.57143
14 Fighting    27     416.4444  69.85185      96.77778       65.92593     53.11111       64.70370     66.07407
15    Steel    27     487.7037  65.22222      92.70370      126.37037     67.51852       80.62963     55.25926
16      Ice    24     433.4583  72.00000      72.75000       71.41667     77.54167       76.29167     63.45833
17    Fairy    17     413.1765  74.11765      61.52941       65.70588     78.52941       84.70588     48.58824
18   Flying     4     485.0000  70.75000      78.75000       66.25000     94.25000       72.50000    102.50000
```

